import{S as U,i as C,s as D,e as N,b as k,I as E,h as p,J as P,k as h,a as j,q as g,l as R,m as b,c as O,r as w,n as y,E as v,L}from"./index.d3bb7315.js";import{_ as V}from"./preload-helper.41c905a7.js";import{w as A}from"./index.4f84b9bd.js";function q(l={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:o,onRegistered:s,onRegisteredSW:n,onRegisterError:a}=l;let c,f;const _=async(i=!0)=>{await f};async function m(){if("serviceWorker"in navigator){const{Workbox:i}=await V(()=>import("./workbox-window.prod.es5.295a6886.js"),[],import.meta.url);c=new i("./sw.js",{scope:"./",type:"classic"}),c.addEventListener("activated",r=>{(r.isUpdate||r.isExternal)&&window.location.reload()}),c.addEventListener("installed",r=>{r.isUpdate||o==null||o()}),c.register({immediate:e}).then(r=>{n?n("./sw.js",r):s==null||s(r)}).catch(r=>{a==null||a(r)})}}return f=m(),_}function B(l={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:o,onRegistered:s,onRegisteredSW:n,onRegisterError:a}=l,c=A(!1),f=A(!1),_=q({immediate:e,onOfflineReady(){f.set(!0),o==null||o()},onNeedRefresh(){c.set(!0),t==null||t()},onRegistered:s,onRegisteredSW:n,onRegisterError:a});return{needRefresh:c,offlineReady:f,updateServiceWorker:_}}function T(l){let e,t,o,s,n,a,c,f;function _(d,u){return d[1]?z:J}let m=_(l),i=m(l),r=l[0]&&I(l);return{c(){e=h("div"),t=h("div"),i.c(),o=j(),r&&r.c(),s=j(),n=h("button"),a=g("Close"),this.h()},l(d){e=R(d,"DIV",{class:!0,role:!0});var u=b(e);t=R(u,"DIV",{class:!0});var S=b(t);i.l(S),S.forEach(p),o=O(u),r&&r.l(u),s=O(u),n=R(u,"BUTTON",{class:!0});var W=b(n);a=w(W,"Close"),W.forEach(p),u.forEach(p),this.h()},h(){y(t,"class","message svelte-1y717j9"),y(n,"class","svelte-1y717j9"),y(e,"class","pwa-toast svelte-1y717j9"),y(e,"role","alert")},m(d,u){k(d,e,u),v(e,t),i.m(t,null),v(e,o),r&&r.m(e,null),v(e,s),v(e,n),v(n,a),c||(f=L(n,"click",l[6]),c=!0)},p(d,u){m!==(m=_(d))&&(i.d(1),i=m(d),i&&(i.c(),i.m(t,null))),d[0]?r?r.p(d,u):(r=I(d),r.c(),r.m(e,s)):r&&(r.d(1),r=null)},d(d){d&&p(e),i.d(),r&&r.d(),c=!1,f()}}}function J(l){let e,t;return{c(){e=h("span"),t=g("New content available, click on reload button to update.")},l(o){e=R(o,"SPAN",{});var s=b(e);t=w(s,"New content available, click on reload button to update."),s.forEach(p)},m(o,s){k(o,e,s),v(e,t)},d(o){o&&p(e)}}}function z(l){let e,t;return{c(){e=h("span"),t=g("App ready to work offline")},l(o){e=R(o,"SPAN",{});var s=b(e);t=w(s,"App ready to work offline"),s.forEach(p)},m(o,s){k(o,e,s),v(e,t)},d(o){o&&p(e)}}}function I(l){let e,t,o,s;return{c(){e=h("button"),t=g("Reload"),this.h()},l(n){e=R(n,"BUTTON",{class:!0});var a=b(e);t=w(a,"Reload"),a.forEach(p),this.h()},h(){y(e,"class","svelte-1y717j9")},m(n,a){k(n,e,a),v(e,t),o||(s=L(e,"click",l[7]),o=!0)},p:E,d(n){n&&p(e),o=!1,s()}}}function F(l){let e,t=l[2]&&T(l);return{c(){t&&t.c(),e=N()},l(o){t&&t.l(o),e=N()},m(o,s){t&&t.m(o,s),k(o,e,s)},p(o,[s]){o[2]?t?t.p(o,s):(t=T(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:E,o:E,d(o){t&&t.d(o),o&&p(e)}}}function G(l,e,t){let o,s,n;const{needRefresh:a,updateServiceWorker:c,offlineReady:f}=B({onRegistered(i){console.log(`SW Registered: ${i}`)},onRegisterError(i){console.log("SW registration error",i)}});P(l,a,i=>t(0,s=i)),P(l,f,i=>t(1,n=i));const _=()=>{f.set(!1),a.set(!1)},m=()=>c(!0);return l.$$.update=()=>{l.$$.dirty&3&&t(2,o=n||s)},[s,n,o,a,c,f,_,m]}class Q extends U{constructor(e){super(),C(this,e,G,F,D,{})}}export{Q as default};
